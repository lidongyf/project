<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" type="text/css" href="css/public.css"/>
		<link rel="stylesheet" type="text/css" href="css/default.css"/>
        <link rel="stylesheet" type="text/css" href="css/register.css"/>
	</head>
	<body>
		<header>
			<a href="#" class="logo"></a>
		</header>	
		<div id="box">
			<div class="box-l">
				<img src="img/login.webp"/>
			</div>
			<form class="box-r">
				<h3>账号密码注册</h3>
				<input type="text" name="user" id="user" value="" placeholder="用户名"/>
				<input type="password" name="pass" id="pass" value="" placeholder="密码"/>
				<input type="password" name="pass1" id="pass1" value="" placeholder="确认密码"/>
				
				<!--<p>密码长度必须在8位以上，含大小写字母、数字、符号至少三种</p>-->
				<span class="tips"></span>
				<input type="button" name="btn" id="btn" value="注册" />
				<span class="line">
					<a href="login.html" class="login">已有账号？请登录</a>
			    </span>
			</form>
			
		</div>	
		<div id="footer" class="margin">
			<p> 
				Copyright © 1968-2019 广东美的网络科技有限公司 粤ICP备17058257号
			</p>
		</div>
	</body>
	<script src="js/jquery.2.2.4.js" type="text/javascript" charset="utf-8"></script>
	<script type="text/javascript">
		class Register{
			constructor(){
				console.log(1)
				this.url = "http://www.icodeilife.cn/ctrl/register.php";
				this.init();
			}
			init(){
				console.log(2)
				var that = this;
				$("#btn").click(function(){
//					3.触发事件时开启ajax
					that.load()
				})
			}
			load(){
				$.ajax({
//					4.使用接口
					url:this.url,
//					7.成功之后的处理
					success:function(res){
						console.log(res)
						switch(res){
							case "0":
								$(".tips").html("用户名重复");break;
							case "1":
								$(".tips").html("注册成功，3秒后跳转到登录");
								setTimeout(()=>{
									location.href = "login.html";
								},3000)
								break;
							case "2":
								$(".tips").html("数据不全");break;
						}
					},
//					5.发送数据
					data:{
						tel:$("#user").val(),
						pass:$("#pass").val()
					}
					})
				}
			}
		new Register();
	</script>
</html>
